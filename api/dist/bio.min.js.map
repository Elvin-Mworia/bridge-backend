{"version":3,"sources":["bio.js"],"names":["router","require","Router","Bio","post","req","res","id","Id","image","uploadPath","picpath","data","user","updated","_updated","regeneratorRuntime","async","_context2","prev","next","console","log","body","path","assign","files","params","substr","length","undefined","__dirname","Object","images","name","mv","err","_context","abrupt","stop","profilepicture","UserId","message","city","county","country","socialmedia","awrap","findOne","where","sent","create","t0","get","info","_context3","json","module","exports"],"mappings":"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","file":"bio.min.js","sourcesContent":["const  router=require('express').Router();\r\nconst {Bio}=require(\"../models\");\r\nconst path=require(\"path\");\r\n\r\n\r\nrouter.post(\"/update/:id\",async (req,res)=>{\r\n    console.log(req.body);\r\n    console.log(Object.assign({},req.files));\r\n    const id=req.params.id;\r\n    const Id=id.substr(1,id.length);\r\n    let image;\r\nlet uploadPath;\r\nif(req.files==undefined || req.files==null){\r\n    uploadPath=__dirname+\"/images/\"+\"profilepic.jpg\";\r\n}\r\nelse{\r\n    // uploadPath=path.resolve(__dirname+\"../images/\")+image.name;\r\n    image=Object.assign({},req.files.images);\r\n    // uploadPath=\"/images/\"+image.name;\r\n    uploadPath=__dirname+\"/images/\"+image.name;\r\n    image.mv(uploadPath,async(err)=>{\r\n    \r\n        if(err)return res.json({message:\"could not upload the image\"});\r\n    }\r\n     \r\n    \r\n    )\r\n\r\n}\r\n\r\n\r\nconst picpath=uploadPath.substr(40,uploadPath.length);\r\nconsole.log(picpath);\r\n//console.log(image);\r\n//console.log(uploadPath);\r\nconst data={\r\n    \r\n    profilepicture:picpath,\r\n    UserId:Id,\r\n    contact: req.body.contact,\r\n    city: req.body.city,\r\n    county: req.body.county,\r\n    country: req.body.country,\r\n    socialmedia: req.body.socialmedia,\r\n   }\r\ntry{\r\n\r\n\r\nconst user=await Bio.findOne({where:{UserId:Id}})\r\nconsole.log(user);\r\nif(user!=null){\r\n    const updated= await Bio.update(data,{where:{UserId:Id}});\r\nres.json({updated})\r\n    \r\n}else{\r\n    const updated= await Bio.create(data);\r\n    res.json({updated})\r\n\r\n}\r\n\r\n\r\n\r\n}catch(err){\r\n    console.log(err);\r\n}\r\n   \r\n\r\n\r\n   \r\n})\r\n//getting data of a specific entreprenuer\r\nrouter.get(\"/data/:id\",async (req, res)=>{\r\n    const id=req.params.id;\r\n    \r\n    try{\r\n        const Id=id.substr(1,id.length);\r\n        console.log(Id);\r\n         const info=await Bio.findOne({where:{UserId:Id}});\r\n         res.json(info);\r\n         console.log(info);\r\n     }\r\n     catch(err){\r\n         console.log(`seems the id was not submitted`);\r\n     \r\n     }\r\n\r\n\r\n})\r\n\r\n\r\n\r\n\r\nmodule.exports=router;"]}