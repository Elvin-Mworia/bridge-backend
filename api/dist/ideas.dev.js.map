{"version":3,"sources":["ideas.js"],"names":["router","require","Router","Ideas","IdeasBought","axios","LocalDateTime","mysql","post","req","res","data","pitcherid","body","pitch","price","time","now","toString","create","json","message","sequelize","get","findAll","order","literal","listofideas","send","reverse","id","params","Id","substr","length","console","log","where","customerid","include","model","required","ideas","Idea","IdeaId","ideaid","module","exports"],"mappings":"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","sourcesContent":["const  router=require('express').Router();\r\nconst {Ideas}=require(\"../models\");\r\nconst {IdeasBought}=require(\"../models\");\r\nconst axios=require(\"axios\");\r\nvar LocalDateTime = require(\"@js-joda/core\").LocalDateTime;\r\nconst mysql=require('mysql2');\r\n\r\n\r\n//create an idea \r\nrouter.post(\"/create\",async(req,res)=>{\r\n    // image:req.file.path;\r\n    const data= {\r\n        pitcherid:req.body.pitcherid,\r\n        pitch:req.body.pitch,\r\n        price:req.body.price,\r\n        time:LocalDateTime.now().toString()\r\n\r\n       };\r\n   const pitch= await Ideas.create(data);\r\n    res.json({pitch:pitch,message:'pitch created'});\r\n    \r\n});\r\n//getting all ideas on first page render\r\nconst sequelize=require(\"sequelize\");\r\nconst res = require('express/lib/response');\r\nrouter.get(\"/\",async (req,res)=>{\r\n  \r\n    const  listofideas= await Ideas.findAll({order:[[sequelize.literal(\"updatedAt\")]]});\r\n      if(listofideas==null){\r\n          res.json(\"no ideas have been added!\");\r\n      }\r\n      res.send(listofideas.reverse());\r\n   \r\n      \r\n  \r\n  });\r\n\r\n//get a specific idea bought\r\nrouter.get(\"/ideasbought/:id\",async (req,res)=>{\r\n    const id=req.params.id;\r\ntry{\r\n   const Id=id.substr(1,id.length);\r\n   console.log(Id);\r\n    const pitch=await IdeasBought.findAll({where:{customerid:Id}});\r\n    res.json(pitch);\r\n    console.log(pitch);\r\n}\r\ncatch(err){\r\n    console.log(`dont panick but it seems the the id was not submitted`);\r\n\r\n}\r\n    \r\n \r\n})\r\n//inner join for finding ideas bought by a customer\r\nrouter.get(\"/ideascustomer/:id\", async (req,res)=>{\r\n    const id=req.params.id;\r\n    const Id=id.substr(1,id.length);\r\n    \r\n const ideas=await Ideas.findAll({include:[{model:IdeasBought,\r\n            required:true,where:{customerid:Id}}]});\r\n            res.json(ideas);\r\n            console.log(ideas);\r\n           \r\n    \r\n})\r\n\r\n//get a specific idea from database\r\nrouter.get(\"/ideas/:id\",async (req,res)=>{\r\n    const id=req.params.id;\r\ntry{\r\n   const Id=id.substr(1,id.length);\r\n   console.log(Id);\r\n    const Idea=await Ideas.findAll({where:{id:Id}});\r\n    res.json(Idea);\r\n}\r\ncatch(err){\r\n    console.log(err);\r\n\r\n}\r\n    \r\n \r\n})\r\n\r\n//route to update ideasbought table\r\nrouter.post(\"/bought\",async(req,res)=>{\r\n    // image:req.file.path;\r\n    const data= {\r\n        IdeaId:req.body.ideaid,\r\n        \r\n        customerid:req.body.customerid,\r\n        time:LocalDateTime.now().toString()\r\n\r\n       };\r\n   const pitch= await IdeasBought.create(data);\r\n    res.json({pitch:pitch,message:'pitch created'});\r\n    \r\n});\r\nmodule.exports=router;"],"file":"ideas.dev.js"}