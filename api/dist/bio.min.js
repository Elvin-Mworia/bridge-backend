"use strict";var router=require("express").Router(),_require=require("../models"),Bio=_require.Bio,path=require("path");router.post("/update/:id",function(r,t){var n,o,s,a,c,i,u,l,d;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(r.body),console.log(Object.assign({},r.files)),n=r.params.id,o=n.substr(1,n.length),null==r.files||null==r.files?a=__dirname+"/images/profilepic.jpg":(s=Object.assign({},r.files.images),a=__dirname+"/images/"+s.name,s.mv(a,function(r){return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:if(r)return e.abrupt("return",t.json({message:"could not upload the image"}));e.next=2;break;case 2:case"end":return e.stop()}})})),c=a.substr(40,a.length),console.log(c),i={profilepicture:c,UserId:o,contact:r.body.contact,city:r.body.city,county:r.body.county,country:r.body.country,socialmedia:r.body.socialmedia},e.prev=8,e.next=11,regeneratorRuntime.awrap(Bio.findOne({where:{UserId:o}}));case 11:if(u=e.sent,console.log(u),null!=u)return e.next=16,regeneratorRuntime.awrap(Bio.update(i,{where:{UserId:o}}));e.next=20;break;case 16:l=e.sent,t.json({updated:l}),e.next=24;break;case 20:return e.next=22,regeneratorRuntime.awrap(Bio.create(i));case 22:d=e.sent,t.json({updated:d});case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(8),console.log(e.t0);case 29:case"end":return e.stop()}},null,null,[[8,26]])}),router.get("/data/:id",function(r,t){var n,o,s;return regeneratorRuntime.async(function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.params.id,e.prev=1,o=n.substr(1,n.length),console.log(o),e.next=6,regeneratorRuntime.awrap(Bio.findOne({where:{UserId:o}}));case 6:s=e.sent,t.json(s),console.log(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log("seems the id was not submitted");case 14:case"end":return e.stop()}},null,null,[[1,11]])}),module.exports=router;
//# sourceMappingURL=bio.min.js.map
